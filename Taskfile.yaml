---
version: "3"

vars:
  PROJECT_DIR:
    sh: "git rev-parse --show-toplevel"
  NAS_ADDRESS:
    sh: "sops --decrypt kubernetes/base/config/secret.sops.yaml | yq '.stringData.NAS_ADDRESS'"

includes:
  cluster: .taskfiles/cluster.yaml
  snapshot: .taskfiles/snapshot.yaml

tasks:
  default:
    silent: true
    cmds:
      - task -l

  pre-commit:
    desc: Run pre-commit
    cmds:
      - pre-commit run --all-files
