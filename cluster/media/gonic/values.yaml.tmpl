---
podAnnotations:
  backup.velero.io/backup-volumes: data

env:
  TZ: Europe/Amsterdam
  GONIC_MUSIC_PATH: "/storage/nas-media/Audio"
  GONIC_SCAN_INTERVAL: "120"

persistence:
  data:
    enabled: true
    mountPath: "/data"
    storageClass: "rook-ceph-block"
    accessMode: ReadWriteOnce
    size: "1Gi"

additionalVolumeMounts:
- name: nas-media
  mountPath: /storage/nas-media
  readOnly: true

additionalVolumes:
- name: nas-media
  persistentVolumeClaim:
    claimName: nfs-nas-media

ingress:
  enabled: true

  annotations:
    kubernetes.io/ingress.class: internal
    cert-manager.io/cluster-issuer: letsencrypt-production
    external-dns.alpha.kubernetes.io/target: cname--int.{{ index (datasource "cluster-vars").domains 0 }}

  hosts:
  - host: gonic.{{ index (datasource "cluster-vars").domains 0 }}
    paths:
    - path: /

  tls:
  - secretName: tls.gonic
    hosts:
    - gonic.{{ index (datasource "cluster-vars").domains 0 }}

resources:
  requests:
    memory: 250Mi
    cpu: 500m
  limits:
    memory: 1500Mi
