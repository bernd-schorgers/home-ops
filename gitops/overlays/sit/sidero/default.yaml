---
apiVersion: kustomize.toolkit.fluxcd.io/v1beta2
kind: Kustomization
metadata:
  name: default-namespace
  namespace: flux-system
spec:
  interval: 5m
  path: "./gitops/base/default"
  prune: true
  wait: true
  sourceRef:
    kind: GitRepository
    name: flux-system
---
apiVersion: kustomize.toolkit.fluxcd.io/v1beta2
kind: Kustomization
metadata:
  name: default-cluster-api-sit
  namespace: flux-system
spec:
  interval: 5m
  path: "./gitops/base/default/cluster-api/sit"
  prune: true
  # Flux gets big mad with wait true
  wait: false
  sourceRef:
    kind: GitRepository
    name: flux-system
  dependsOn:
    - name: default-namespace
