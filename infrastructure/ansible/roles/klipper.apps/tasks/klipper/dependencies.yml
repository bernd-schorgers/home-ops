---
- name: Install dependencies on Debian/Ubuntu machines
  become: true
  when:
    - ansible_distribution == 'Debian'
  ansible.builtin.apt:
    update_cache: yes
    name:
      - avrdude
      - avr-libc
      - binutils-arm-none-eabi
      - binutils-avr
      - gcc-arm-none-eabi
      - gcc-avr
      - libffi-dev
      - libncurses-dev
      - libnewlib-arm-none-eabi
      - libusb-1.0-0
      - libusb-dev
      - pkg-config
      - stm32flash

- name: Install dependencies on Fedora machines
  become: true
  when:
    - ansible_distribution == 'Fedora'
  ansible.builtin.dnf:
    update_cache: yes
    name:
      - libffi-devel
      - libusb-devel
      - ncurses
      - avrdude
      - avr-binutils
      - avr-gcc
      - avr-libc
