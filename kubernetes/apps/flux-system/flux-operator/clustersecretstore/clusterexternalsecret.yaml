---
apiVersion: external-secrets.io/v1beta1
kind: ClusterExternalSecret
metadata:
  name: sops-age
spec:
  # The name to be used on the ExternalSecrets
  externalSecretName: sops-age
  namespaceSelectors:
  - matchLabels: {} #deploy to every namespace
  refreshTime: "1h" #Cluster External Secret refresh Time
  externalSecretSpec:
    secretStoreRef:
      name: flux-system-secrets
      kind: ClusterSecretStore
    refreshInterval: "10m" #External Secret Refresh Time
    target:
      name: sops-age
      creationPolicy: 'Owner'
    dataFrom:
      - extract:
          key: sops-age
