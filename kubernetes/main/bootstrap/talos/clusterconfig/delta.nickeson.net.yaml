version: v1alpha1
debug: false
persist: true
machine:
  type: controlplane
  token: ahpqyr.hvi81ftbier95gkj
  ca:
    crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUJQekNCOHFBREFnRUNBaEVBcjBFYVJrYzFrVUtBSlh3Vk5Mb3ZxVEFGQmdNclpYQXdFREVPTUF3R0ExVUUKQ2hNRmRHRnNiM013SGhjTk1qUXdOek14TVRVME56STFXaGNOTXpRd056STVNVFUwTnpJMVdqQVFNUTR3REFZRApWUVFLRXdWMFlXeHZjekFxTUFVR0F5dGxjQU1oQUJRdXRHR1JSMlVmVHU2V3psaGxxVGlEc2JoSytKeDAzSVJCCnc5dUhiZ2hDbzJFd1h6QU9CZ05WSFE4QkFmOEVCQU1DQW9Rd0hRWURWUjBsQkJZd0ZBWUlLd1lCQlFVSEF3RUcKQ0NzR0FRVUZCd01DTUE4R0ExVWRFd0VCL3dRRk1BTUJBZjh3SFFZRFZSME9CQllFRkYwcHRKMjdSSDZmV0dQTwpXclptT0taa0gvU1VNQVVHQXl0bGNBTkJBTjNmaUdrOGpNeG9waFRaZDJGL3JFUDVEVUJ6aGFHMzFQYlJWQzVpCkxTVHpzeW15eXRuWjg4aTFaeEYxNlZVNzhxMlQ0ODhTMEdzaW54Mis1VWdzQWdzPQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
    key: LS0tLS1CRUdJTiBFRDI1NTE5IFBSSVZBVEUgS0VZLS0tLS0KTUM0Q0FRQXdCUVlESzJWd0JDSUVJSFVwRndMek5IRzlBS0k0L0JXUHBtVTEwb3MrTXh2eWE4THV1WjJqRndISAotLS0tLUVORCBFRDI1NTE5IFBSSVZBVEUgS0VZLS0tLS0K
  certSANs:
    - main.nickeson.net
    - 127.0.0.1
  kubelet:
    image: ghcr.io/siderolabs/kubelet:v1.30.3
    extraArgs:
      rotate-server-certificates: "true"
    extraMounts:
      - destination: /var/mnt/sata
        type: bind
        source: /var/mnt/sata
        options:
          - rbind
          - rshared
          - rw
    extraConfig:
      maxPods: 150
    defaultRuntimeSeccompProfileEnabled: true
    nodeIP:
      validSubnets:
        - 10.28.1.0/24
    disableManifestsDirectory: true
  network:
    hostname: delta.nickeson.net
    interfaces:
      - interface: bond0
        bond:
          interfaces: []
          mode: active-backup
        vlans:
          - routes: []
            dhcp: true
            vlanId: 303
            mtu: 1500
            dhcpOptions:
              routeMetric: 4096
        mtu: 0
        dhcp: true
        vip:
          ip: 10.5.0.10
    disableSearchDomain: true
  install:
    diskSelector:
      size: <= 2560GB
      model: Samsung*
    image: ghcr.io/siderolabs/installer:v1.7.5
    bootloader: true
    wipe: false
  files:
    - content: |-
        [plugins]
          [plugins."io.containerd.grpc.v1.cri"]
            enable_unprivileged_ports = true
            enable_unprivileged_icmp = true
      permissions: 0o0
      path: /etc/cri/conf.d/20-customization.part
      op: create
    - content: |
        [ NFSMount_Global_Options ]
        nfsvers=4.2
        hard=True
        noatime=True
        nodiratime=True
        rsize=131072
        wsize=131072
        nconnect=8
      permissions: 0o644
      path: /etc/nfsmount.conf
      op: overwrite
  sysctls:
    fs.inotify.max_queued_events: "65536"
    fs.inotify.max_user_instances: "8192"
    fs.inotify.max_user_watches: "524288"
    net.core.rmem_max: "2500000"
    net.core.wmem_max: "2500000"
  features:
    rbac: true
    stableHostname: true
    kubernetesTalosAPIAccess:
      enabled: true
      allowedRoles:
        - os:admin
      allowedKubernetesNamespaces:
        - system-upgrade
    apidCheckExtKeyUsage: true
cluster:
  id: gH4YlNAMRwnXK_pYo7z7KIzXk5YGm_XpfXyfftVM2u8=
  secret: t6/K/5zPfOEM4gZ0NnhTgjCFN/a5mbKQzuSisRhMmiQ=
  controlPlane:
    endpoint: https://10.5.0.10:6443
  clusterName: main
  network:
    cni:
      name: none
    dnsDomain: cluster.local
    podSubnets:
      - 10.244.0.0/16
    serviceSubnets:
      - 10.96.0.0/12
  token: 9xwaoi.sueargbahrmt121z
  secretboxEncryptionSecret: jlGYpWuOyvwxSvMaatKOmAsO3avhJHkjFt5A5Ibx6Js=
  ca:
    crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUJpVENDQVRDZ0F3SUJBZ0lSQUsrbjJiVEwwQzlGOEtYQXhUenFXMXd3Q2dZSUtvWkl6ajBFQXdJd0ZURVQKTUJFR0ExVUVDaE1LYTNWaVpYSnVaWFJsY3pBZUZ3MHlOREEzTXpFeE5UUTNNalZhRncwek5EQTNNamt4TlRRMwpNalZhTUJVeEV6QVJCZ05WQkFvVENtdDFZbVZ5Ym1WMFpYTXdXVEFUQmdjcWhrak9QUUlCQmdncWhrak9QUU1CCkJ3TkNBQVJoNy9wYkh3ZDNJN0NuWWxUVVlNMjJNZ2cwaVRHMDV6bTdXbG1ZMDZHNHFjRFNzVEhjdFdZYnFlRTUKMklqaGE4ZlNWYXQ1ZWJRU3JoclA0SnllUDN1b28yRXdYekFPQmdOVkhROEJBZjhFQkFNQ0FvUXdIUVlEVlIwbApCQll3RkFZSUt3WUJCUVVIQXdFR0NDc0dBUVVGQndNQ01BOEdBMVVkRXdFQi93UUZNQU1CQWY4d0hRWURWUjBPCkJCWUVGSHZhc29LUUoyK3ZBeG1kaHNDdFZ0R1Q1YXc3TUFvR0NDcUdTTTQ5QkFNQ0EwY0FNRVFDSUdad3I4UjAKc2pOTWV3cHAwcXd6cGtXS1hSc1VkZTNWQlZhYjlLZEoyVzhLQWlBMUdncnRLWndPY25ndkFpbHB5UW94NkcwcApaUjlSOEFKYnV1MitSU3VKSWc9PQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
    key: LS0tLS1CRUdJTiBFQyBQUklWQVRFIEtFWS0tLS0tCk1IY0NBUUVFSURGd2o0UGZHSkVYenVDcHZyRVVVY1BQK29xVkhJYzJkaUZtWC9FMmJkc1ZvQW9HQ0NxR1NNNDkKQXdFSG9VUURRZ0FFWWUvNld4OEhkeU93cDJKVTFHRE50aklJTklreHRPYzV1MXBabU5PaHVLbkEwckV4M0xWbQpHNm5oT2RpSTRXdkgwbFdyZVhtMEVxNGF6K0Njbmo5N3FBPT0KLS0tLS1FTkQgRUMgUFJJVkFURSBLRVktLS0tLQo=
  aggregatorCA:
    crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUJZVENDQVFhZ0F3SUJBZ0lSQUxuWnFIcGNwYXhDRDNCVHVUZko0b3d3Q2dZSUtvWkl6ajBFQXdJd0FEQWUKRncweU5EQTNNekV4TlRRM01qVmFGdzB6TkRBM01qa3hOVFEzTWpWYU1BQXdXVEFUQmdjcWhrak9QUUlCQmdncQpoa2pPUFFNQkJ3TkNBQVNyVE5aWlVGVEtGRXJ0dTV6QjBUUG9oWHFMT3JNeURuTkkyaDlGVk9tWEFZa3JuOVQ3CnpscEJ3UkRtN2FTeWtUMTBDUFg1cXA3N0JrY0ttMlpCelpmcm8yRXdYekFPQmdOVkhROEJBZjhFQkFNQ0FvUXcKSFFZRFZSMGxCQll3RkFZSUt3WUJCUVVIQXdFR0NDc0dBUVVGQndNQ01BOEdBMVVkRXdFQi93UUZNQU1CQWY4dwpIUVlEVlIwT0JCWUVGR3NGRElwd3B5MHR1Zjh0RUNhcVpKSkVqeS95TUFvR0NDcUdTTTQ5QkFNQ0Ewa0FNRVlDCklRRFhkUnUrU0dwdWtkOE9DL2Jna3ZzS1NpUThGRlUxeVkveDFoVEYzNjNLNXdJaEFLaUMzSk1WWVdjRzMxei8KMUxqUzFKYTJmNmczbDZpMkphYnFJT1YrUVdVbAotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
    key: LS0tLS1CRUdJTiBFQyBQUklWQVRFIEtFWS0tLS0tCk1IY0NBUUVFSVBZNk5JMVF3VlQzcDIvekRodDBVeUxuZkt1eFo5VVk1ZUtOM1N4R0tHbDNvQW9HQ0NxR1NNNDkKQXdFSG9VUURRZ0FFcTB6V1dWQlV5aFJLN2J1Y3dkRXo2SVY2aXpxek1nNXpTTm9mUlZUcGx3R0pLNS9VKzg1YQpRY0VRNXUya3NwRTlkQWoxK2FxZSt3WkhDcHRtUWMyWDZ3PT0KLS0tLS1FTkQgRUMgUFJJVkFURSBLRVktLS0tLQo=
  serviceAccount:
    key: LS0tLS1CRUdJTiBFQyBQUklWQVRFIEtFWS0tLS0tCk1IY0NBUUVFSUU3czhRVStOb2hSdWNacmxjSDRqekc4Nldnd2NFdUN6bUlJYUIwZTdnZXpvQW9HQ0NxR1NNNDkKQXdFSG9VUURRZ0FFemd3Tks5WjhYNFdUQ2xLN3ZuZHNDbUpkU081THcwaGhkaitHZXZzTkhnMW1sRGFXR0VBNQpLQjZDcG5zSTV1T0ptR0czOS9GRFJlaTJ1RVFJR21yQk5BPT0KLS0tLS1FTkQgRUMgUFJJVkFURSBLRVktLS0tLQo=
  apiServer:
    image: registry.k8s.io/kube-apiserver:v1.30.3
    certSANs:
      - 10.5.0.10
      - main.nickeson.net
      - 127.0.0.1
    disablePodSecurityPolicy: true
    auditPolicy:
      apiVersion: audit.k8s.io/v1
      kind: Policy
      rules:
        - level: Metadata
  controllerManager:
    image: registry.k8s.io/kube-controller-manager:v1.30.3
  proxy:
    disabled: true
    image: registry.k8s.io/kube-proxy:v1.30.3
  scheduler:
    image: registry.k8s.io/kube-scheduler:v1.30.3
  discovery:
    enabled: true
    registries:
      kubernetes:
        disabled: true
      service: {}
  etcd:
    ca:
      crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUJmakNDQVNTZ0F3SUJBZ0lSQUtZVXFydzh3aEhSVGZnbjhmMVdEdk13Q2dZSUtvWkl6ajBFQXdJd0R6RU4KTUFzR0ExVUVDaE1FWlhSalpEQWVGdzB5TkRBM016RXhOVFEzTWpWYUZ3MHpOREEzTWpreE5UUTNNalZhTUE4eApEVEFMQmdOVkJBb1RCR1YwWTJRd1dUQVRCZ2NxaGtqT1BRSUJCZ2dxaGtqT1BRTUJCd05DQUFRK0I1NkNPZ1V1Ck1jdWJxUVU2dFdQNWJpWFpoazFJaGJUc1lsVlNxODFkVkJaMUZQM2dtM2hULzRDTTVZcEdHM2xJdmFjL2ZlVGQKdDFnQkhpakR5WFhpbzJFd1h6QU9CZ05WSFE4QkFmOEVCQU1DQW9Rd0hRWURWUjBsQkJZd0ZBWUlLd1lCQlFVSApBd0VHQ0NzR0FRVUZCd01DTUE4R0ExVWRFd0VCL3dRRk1BTUJBZjh3SFFZRFZSME9CQllFRk4ybUNXMU02eGZ3CkJyQmtkVHFLYUd6YVFxclZNQW9HQ0NxR1NNNDlCQU1DQTBnQU1FVUNJUUQ5OEtZZ0ZnTHhlZlhBRUY4b1hEL3cKb2l1d1VYNjV2eUE3VDRUbTJiaFdyZ0lnVHo2U2pYQUthSlZpd0NTaXUvWG5scEl1VHF6Wndvd2VybXIxeDdzOQphYXc9Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K
      key: LS0tLS1CRUdJTiBFQyBQUklWQVRFIEtFWS0tLS0tCk1IY0NBUUVFSU52SDVsbTJ5RXgwS0cvWGlWUUxmUHdzU21FK2JUY0FlbW9Md2trQ1NYNThvQW9HQ0NxR1NNNDkKQXdFSG9VUURRZ0FFUGdlZWdqb0ZMakhMbTZrRk9yVmorVzRsMllaTlNJVzA3R0pWVXF2TlhWUVdkUlQ5NEp0NApVLytBak9XS1JodDVTTDJuUDMzazNiZFlBUjRvdzhsMTRnPT0KLS0tLS1FTkQgRUMgUFJJVkFURSBLRVktLS0tLQo=
    advertisedSubnets:
      - 10.28.1.0/24
  allowSchedulingOnMasters: true
